import{c as O,b as V,r as U,y as j,z as T,j as e,C as d,f as c,aT as l,g as m,h as p,k as i,bJ as K,B as D,bb as I,H,I as r,J as P}from"./index-DKFI7ZyH.js";import{T as J,a as Q,b as C,c as w}from"./tabs-BarOwXjl.js";import{A as $,a as W,b as X}from"./alert-BjzQykUU.js";import{B as u}from"./badge-CsDoxorc.js";import{S as Y}from"./shield-o8exw86Q.js";import{D as Z}from"./download-BHqaFyMI.js";import{T as ee}from"./trash-2-CpzcPU4s.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=O("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),y=t=>{try{const o=new Date(t);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(o)}catch{return"Data inválida"}};function ce(){const{toast:t}=V(),[o,E]=U.useState("consentimentos"),{data:g,isLoading:q,error:L}=j({queryKey:["/api/lgpd/consents"],queryFn:async()=>(await r("GET","/api/lgpd/consents")).json()}),{data:x,isLoading:S}=j({queryKey:["/api/lgpd/documents/privacy_policy"],queryFn:async()=>(await r("GET","/api/lgpd/documents/privacy_policy")).json(),retry:!1,enabled:o==="documentos"}),{data:h,isLoading:z}=j({queryKey:["/api/lgpd/documents/terms_of_use"],queryFn:async()=>(await r("GET","/api/lgpd/documents/terms_of_use")).json(),retry:!1,enabled:o==="documentos"}),{data:v,isLoading:k}=j({queryKey:["/api/lgpd/subject-requests"],queryFn:async()=>(await r("GET","/api/lgpd/subject-requests")).json(),enabled:o==="solicitacoes"}),R=T({mutationFn:async({consentType:s,granted:a})=>(await r("POST","/api/lgpd/consents",{consentType:s,granted:a})).json(),onSuccess:()=>{P.invalidateQueries({queryKey:["/api/lgpd/consents"]}),t({title:"Consentimento atualizado",description:"Suas preferências de privacidade foram atualizadas com sucesso."})},onError:s=>{t({title:"Erro",description:"Não foi possível atualizar o consentimento. Tente novamente.",variant:"destructive"})}}),f=T({mutationFn:async s=>(await r("POST","/api/lgpd/subject-requests",{requestType:"deletion",requestDetails:s})).json(),onSuccess:()=>{P.invalidateQueries({queryKey:["/api/lgpd/subject-requests"]}),t({title:"Solicitação enviada",description:"Sua solicitação de exclusão de dados foi enviada e será processada em breve."})},onError:s=>{t({title:"Erro",description:"Não foi possível processar sua solicitação. Tente novamente.",variant:"destructive"})}}),b=T({mutationFn:async()=>(await r("GET","/api/lgpd/data-report")).json(),onSuccess:s=>{const a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),N=URL.createObjectURL(a),n=document.createElement("a");n.href=N,n.download="dados_pessoais.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(N),t({title:"Relatório de dados gerado",description:"O download do relatório completo de seus dados pessoais foi iniciado."})},onError:s=>{t({title:"Erro",description:"Não foi possível gerar o relatório de dados. Tente novamente.",variant:"destructive"})}}),A=s=>({marketing:"Comunicações de marketing",third_party:"Compartilhamento com terceiros",analytics:"Análise de uso",personalization:"Personalização de conteúdo",essential:"Funcionamento essencial"})[s]||s,_=s=>{switch(s){case"Pendente":return e.jsx(u,{variant:"outline",className:"bg-yellow-50 text-yellow-700",children:"Pendente"});case"Em Processamento":return e.jsx(u,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"Em Processamento"});case"Concluído":return e.jsx(u,{variant:"outline",className:"bg-green-50 text-green-700",children:"Concluído"});case"Rejeitado":return e.jsx(u,{variant:"outline",className:"bg-red-50 text-red-700",children:"Rejeitado"});default:return e.jsx(u,{variant:"outline",children:s})}},F=s=>({deletion:"Exclusão de dados",anonymization:"Anonimização de dados",export:"Exportação de dados",correction:"Correção de dados"})[s]||s,G=(s,a)=>{R.mutate({consentType:s,granted:a})},M=()=>{window.confirm("Tem certeza que deseja solicitar a exclusão de sua conta? Esta ação não pode ser desfeita uma vez que for processada.")&&f.mutate("Solicitação de exclusão de conta e todos os dados pessoais associados.")},B=()=>{b.mutate()};return e.jsxs("div",{className:"container py-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Y,{className:"w-6 h-6 text-primary mr-2"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Centro de Privacidade"})]}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Gerencie suas preferências de privacidade e consentimentos de acordo com a Lei Geral de Proteção de Dados (LGPD)."}),e.jsxs(J,{defaultValue:"consentimentos",value:o,onValueChange:E,children:[e.jsxs(Q,{className:"grid w-full grid-cols-3 mb-8",children:[e.jsx(C,{value:"consentimentos",children:"Consentimentos"}),e.jsx(C,{value:"documentos",children:"Documentos Legais"}),e.jsx(C,{value:"solicitacoes",children:"Suas Solicitações"})]}),e.jsx(w,{value:"consentimentos",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Preferências de Privacidade"}),e.jsx(m,{children:"Controle quais dados e informações você nos permite coletar e processar."})]}),e.jsx(p,{children:q?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(i,{className:"h-8 w-8 animate-spin text-primary"})}):L?e.jsxs($,{variant:"destructive",className:"mb-4",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx(W,{children:"Erro"}),e.jsx(X,{children:"Não foi possível carregar suas preferências de privacidade. Tente novamente mais tarde."})]}):e.jsx("div",{className:"space-y-4",children:g&&g.length>0?g.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 py-3",children:[e.jsx(K,{id:`consent-${s.id}`,checked:s.granted,onCheckedChange:a=>G(s.consentType,!!a),disabled:s.consentType==="essential"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{htmlFor:`consent-${s.id}`,className:"font-medium leading-none cursor-pointer",children:[A(s.consentType),s.consentType==="essential"&&e.jsx("span",{className:"ml-2 text-xs bg-gray-100 p-1 rounded",children:"Obrigatório"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.consentType==="marketing"&&"Envio de novidades, dicas e ofertas por e-mail e notificações.",s.consentType==="third_party"&&"Compartilhamento com parceiros para melhorar os serviços oferecidos.",s.consentType==="analytics"&&"Análise de uso para melhorar a experiência e o desempenho da plataforma.",s.consentType==="personalization"&&"Personalização de conteúdo com base em seu perfil e atividades.",s.consentType==="essential"&&"Processamento necessário para o funcionamento básico da plataforma."]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Última atualização: ",y(s.timestamp)]})]})]},s.id)):e.jsx("p",{children:"Nenhum consentimento configurado. Entre em contato com o suporte."})})})]}),e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Seus Direitos"}),e.jsx(m,{children:"A LGPD garante direitos sobre seus dados pessoais. Você pode solicitar acesso, correção, anonimização, exclusão e mais."})]}),e.jsx(p,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(D,{onClick:B,variant:"outline",className:"flex items-center justify-center",disabled:b.isPending,children:[b.isPending?e.jsx(i,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Baixar Meus Dados"]}),e.jsxs(D,{onClick:M,variant:"outline",className:"flex items-center justify-center text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",disabled:f.isPending,children:[f.isPending?e.jsx(i,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Solicitar Exclusão de Conta"]})]})})]})]})}),e.jsx(w,{value:"documentos",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Política de Privacidade"}),e.jsx(m,{children:"Nossa política de privacidade explica como coletamos, usamos e protegemos seus dados pessoais."})]}),e.jsx(p,{children:S?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(i,{className:"h-8 w-8 animate-spin text-primary"})}):x?e.jsxs("div",{children:[e.jsxs("div",{className:"text-muted-foreground mb-4 text-sm",children:[e.jsxs("p",{children:["Versão: ",x.version]}),e.jsxs("p",{children:["Vigência: ",y(x.effectiveDate)]})]}),e.jsx("div",{className:"prose prose-sm max-h-96 overflow-y-auto border rounded p-4 bg-gray-50",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:x.documentText}})})]}):e.jsx("p",{children:"Documento não disponível no momento."})})]}),e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Termos de Uso"}),e.jsx(m,{children:"Nossos termos de uso descrevem as regras e condições para uso da plataforma."})]}),e.jsx(p,{children:z?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(i,{className:"h-8 w-8 animate-spin text-primary"})}):h?e.jsxs("div",{children:[e.jsxs("div",{className:"text-muted-foreground mb-4 text-sm",children:[e.jsxs("p",{children:["Versão: ",h.version]}),e.jsxs("p",{children:["Vigência: ",y(h.effectiveDate)]})]}),e.jsx("div",{className:"prose prose-sm max-h-96 overflow-y-auto border rounded p-4 bg-gray-50",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:h.documentText}})})]}):e.jsx("p",{children:"Documento não disponível no momento."})})]})]})}),e.jsx(w,{value:"solicitacoes",children:e.jsxs(d,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Solicitações de Direitos do Titular"}),e.jsx(m,{children:"Acompanhe o status das suas solicitações relacionadas aos seus dados pessoais."})]}),e.jsx(p,{children:k?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(i,{className:"h-8 w-8 animate-spin text-primary"})}):v&&v.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-2",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-2",children:"Data"}),e.jsx("th",{className:"text-left py-3 px-2",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-2",children:"Detalhes"})]})}),e.jsx("tbody",{children:v.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-2",children:F(s.requestType)}),e.jsx("td",{className:"py-3 px-2",children:y(s.requestDate)}),e.jsx("td",{className:"py-3 px-2",children:_(s.status)}),e.jsx("td",{className:"py-3 px-2",children:s.requestDetails||"Sem detalhes adicionais"})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(I,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Você ainda não fez nenhuma solicitação."})]})}),e.jsx(H,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"As solicitações são processadas em até 15 dias úteis, conforme previsto na LGPD."})})]})})]})]})}export{ce as default};
