import{c as de,bh as be,bi as we,c6 as ye,y as I,j as e,C as y,f as S,h as M,H as ae,B as f,E as _,aT as O,g as U,i as Me,A as D,b3 as w,b as me,aR as De,aS as Ee,z as W,I as Q,aU as Ce,aV as T,aW as A,aX as k,aY as L,aN as B,aZ as H,b1 as oe,c7 as Se,d as Fe,u as Pe,r as C,b5 as Te,b2 as X,bN as Ae,bP as le,G as ke,J as ce}from"./index-DKFI7ZyH.js";import{B as b}from"./badge-CsDoxorc.js";import{T as Le,a as He,b as ee,c as se}from"./tabs-BarOwXjl.js";import{A as R,a as V,b as q}from"./alert-BjzQykUU.js";import{T as ue}from"./textarea-CW1zArsP.js";import{A as xe,b as he,a as pe}from"./avatar-Dqs0JyeB.js";import{S as o}from"./skeleton-CDe7BuYf.js";import{U as Ie}from"./user-cog-CN8mmp23.js";import{P as Oe}from"./plus-BTDcvFex.js";import{U as Ue}from"./user-DNBDU0iz.js";import{V as Re}from"./video-CdR5eL6v.js";import{c as Ve,f as qe}from"./formatDistanceToNow-CnNYJNjZ.js";import{i as $e}from"./isSameDay-BgnmRS2q.js";import{i as Ge}from"./isBefore-Dqtm-g72.js";import{p as re}from"./pt-BnVU24TM.js";import{D as ze,a as Ke,e as Be,b as _e,f as We,c as Qe,g as Ye}from"./dialog-B2iG5lPB.js";import{U as Ze}from"./user-plus-DziNTdJR.js";import{I as Je}from"./info-CRC729Dm.js";import{S as Xe}from"./send-CMGarVcR.js";import"./endOfMonth-D7azNT7e.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=de("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=de("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function as(n,d){const u=+be(n);return we(n,u+d)}function rs(n,d){return as(n,d*ye)}function ts(n){return $e(n,Ve(n))}const ns=n=>n?n.split(" ").map(d=>d[0]).join("").toUpperCase().substring(0,2):"?",is=({groupId:n,isAdmin:d})=>{const{data:u,isLoading:i,error:p}=I({queryKey:["/api/support-groups",n,"members"],enabled:!!n}),j=(u==null?void 0:u.data)||[],h=u==null?void 0:u.pagination;if(i)return e.jsx("div",{className:"space-y-4",children:Array(5).fill(0).map((r,l)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{className:"h-4 w-32 mb-2"}),e.jsx(o,{className:"h-3 w-24"})]})]},l))});if(p)return e.jsxs(R,{variant:"destructive",children:[e.jsx(V,{children:"Erro ao carregar membros"}),e.jsx(q,{children:"Não foi possível carregar a lista de membros do grupo. Por favor, tente novamente mais tarde."})]});if(j.length===0)return e.jsxs("div",{className:"text-center py-10",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhum membro"}),e.jsx("p",{className:"text-muted-foreground",children:"Este grupo ainda não tem membros."})]});const N=[...j].sort((r,l)=>r.membership.role==="admin"&&l.membership.role!=="admin"?-1:r.membership.role!=="admin"&&l.membership.role==="admin"?1:0);return e.jsxs("div",{className:"space-y-4",children:[N.map(r=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(xe,{children:[e.jsx(he,{src:r.user.profilePicture}),e.jsx(pe,{children:ns(`${r.user.firstName} ${r.user.lastName}`)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"font-medium",children:[r.user.firstName," ",r.user.lastName]}),r.membership.role==="admin"&&e.jsxs(b,{variant:"secondary",className:"ml-2 flex items-center gap-1",children:[e.jsx(ss,{className:"h-3 w-3"}),e.jsx("span",{children:"Admin"})]}),r.membership.role==="moderator"&&e.jsxs(b,{variant:"outline",className:"ml-2 flex items-center gap-1",children:[e.jsx(Ie,{className:"h-3 w-3"}),e.jsx("span",{children:"Moderador"})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Entrou ",new Date(r.membership.joinedAt).toLocaleDateString("pt-BR")]})]})]},r.membership.id)),h&&h.totalPages>1&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Mostrando ",j.length," de ",h.total," membros"]})})]})},os=({groupId:n,isAdmin:d,onSchedule:u})=>{const{data:i,isLoading:p,error:j}=I({queryKey:["/api/support-groups",n,"meetings"],enabled:!!n}),h={scheduled:"secondary",ongoing:"default",completed:"outline",canceled:"destructive"},N={scheduled:"Agendada",ongoing:"Em andamento",completed:"Concluída",canceled:"Cancelada"};if(p)return e.jsx("div",{className:"space-y-4",children:Array(2).fill(0).map((t,s)=>e.jsxs(y,{children:[e.jsxs(S,{children:[e.jsx(o,{className:"h-5 w-40 mb-2"}),e.jsx(o,{className:"h-4 w-64"})]}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"h-4 w-full"}),e.jsx(o,{className:"h-4 w-2/3"})]})}),e.jsx(ae,{children:e.jsx(o,{className:"h-9 w-28 mr-2"})})]},s))});if(j)return e.jsxs(R,{variant:"destructive",children:[e.jsx(V,{children:"Erro ao carregar reuniões"}),e.jsx(q,{children:"Não foi possível carregar as reuniões do grupo. Por favor, tente novamente mais tarde."})]});const r=(i==null?void 0:i.filter(t=>t.meeting.status!=="completed"&&t.meeting.status!=="canceled"))||[],l=(i==null?void 0:i.filter(t=>t.meeting.status==="completed"||t.meeting.status==="canceled"))||[];if((i==null?void 0:i.length)===0)return e.jsxs("div",{className:"text-center py-10",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhuma reunião agendada"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Ainda não há reuniões agendadas para este grupo."}),d&&e.jsxs(f,{onClick:u,children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Agendar reunião"]})]});const x=t=>{const s=new Date(t);return ts(s)?`Hoje às ${D(s,"HH:mm",{locale:re})}`:D(s,"EEEE, d 'de' MMMM 'às' HH:mm",{locale:re})};return e.jsxs("div",{className:"space-y-6",children:[d&&e.jsxs(f,{onClick:u,className:"w-full mb-4",children:[e.jsx(Oe,{className:"mr-2 h-4 w-4"}),"Agendar nova reunião"]}),r.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Próximas reuniões"}),e.jsx("div",{className:"space-y-4",children:r.map(t=>{const s=t.meeting,g=new Date(s.scheduledFor),v=rs(g,s.duration),$=s.status==="ongoing",F=Ge(v,new Date)&&!$;return e.jsxs(y,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(O,{children:s.title}),e.jsx(U,{children:x(s.scheduledFor)})]}),e.jsx(b,{variant:h[s.status]||"outline",children:N[s.status]||s.status})]})}),e.jsxs(M,{className:"space-y-2",children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.duration," minutos"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsxs("span",{children:["Criada por ",t.creator.firstName]})]})]})]}),e.jsx(ae,{children:s.meetingUrl&&!F?e.jsxs(f,{size:"sm",variant:$?"default":"outline",children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),e.jsxs("a",{href:s.meetingUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1",children:[$?"Entrar agora":"Link da reunião",e.jsx(es,{className:"h-3 w-3 ml-1"})]})]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:F?"Esta reunião já ocorreu":"O link da reunião estará disponível antes do início"})})]},s.id)})})]}),l.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Reuniões anteriores"}),e.jsxs("div",{className:"space-y-4",children:[l.slice(0,3).map(t=>{const s=t.meeting;return e.jsxs(y,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(O,{children:s.title}),e.jsx(U,{children:x(s.scheduledFor)})]}),e.jsx(b,{variant:h[s.status]||"outline",children:N[s.status]||s.status})]})}),e.jsx(M,{children:s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})})]},s.id)}),l.length>3&&e.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-2",children:["Mostrando 3 de ",l.length," reuniões anteriores"]})]})]})]})},ls=w.object({title:w.string().min(3,{message:"O título deve ter pelo menos 3 caracteres"}).max(100),description:w.string().optional(),scheduledFor:w.string().refine(n=>{const d=new Date;return new Date(n)>d},{message:"A data deve ser no futuro"}),duration:w.number().int().min(15).max(240).default(60),meetingUrl:w.string().url({message:"URL inválida"}).optional().or(w.literal(""))}),cs=({open:n,onOpenChange:d,groupId:u,groupName:i,onSuccess:p})=>{const{toast:j}=me(),h=new Date,N=D(h,"yyyy-MM-dd'T'HH:mm"),r=D(new Date(h.getFullYear(),h.getMonth(),h.getDate()+1,19,0),"yyyy-MM-dd'T'HH:mm"),l=De({resolver:Ee(ls),defaultValues:{title:`Reunião do grupo ${i}`,description:"",scheduledFor:r,duration:60,meetingUrl:""}}),x=W({mutationFn:async s=>{const g=await Q("POST",`/api/support-groups/${u}/meetings`,s);if(!g.ok){const v=await g.json();throw new Error(v.message||"Erro ao agendar reunião")}return await g.json()},onSuccess:()=>{j({title:"Reunião agendada com sucesso!",description:"A reunião foi agendada e os membros serão notificados."}),l.reset(),d(!1),p&&p()},onError:s=>{j({title:"Erro ao agendar reunião",description:s instanceof Error?s.message:"Ocorreu um erro ao agendar a reunião",variant:"destructive"})}}),t=s=>{x.mutate(s)};return e.jsx(ze,{open:n,onOpenChange:d,children:e.jsxs(Ke,{className:"sm:max-w-[500px]",children:[e.jsxs(Be,{children:[e.jsx(_e,{children:"Agendar reunião do grupo"}),e.jsxs(We,{children:['Agende uma nova reunião para os membros do grupo "',i,'"']})]}),e.jsx(Ce,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(t),className:"space-y-4",children:[e.jsx(T,{control:l.control,name:"title",render:({field:s})=>e.jsxs(A,{children:[e.jsx(k,{children:"Título da reunião"}),e.jsx(L,{children:e.jsx(B,{...s})}),e.jsx(H,{})]})}),e.jsx(T,{control:l.control,name:"description",render:({field:s})=>e.jsxs(A,{children:[e.jsx(k,{children:"Descrição (opcional)"}),e.jsx(L,{children:e.jsx(ue,{placeholder:"Descreva o propósito da reunião, tópicos a serem discutidos...",className:"min-h-[80px]",...s})}),e.jsx(oe,{children:"Inclua informações importantes sobre a reunião"}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(T,{control:l.control,name:"scheduledFor",render:({field:s})=>e.jsxs(A,{children:[e.jsx(k,{children:"Data e hora"}),e.jsx(L,{children:e.jsx(B,{type:"datetime-local",min:N,...s})}),e.jsx(H,{})]})}),e.jsx(T,{control:l.control,name:"duration",render:({field:s})=>e.jsxs(A,{children:[e.jsx(k,{children:"Duração (minutos)"}),e.jsx(L,{children:e.jsx(B,{type:"number",min:15,max:240,step:15,...s,onChange:g=>s.onChange(parseInt(g.target.value)||60)})}),e.jsx(H,{})]})})]}),e.jsx(T,{control:l.control,name:"meetingUrl",render:({field:s})=>e.jsxs(A,{children:[e.jsx(k,{children:"Link da reunião (opcional)"}),e.jsx(L,{children:e.jsx(B,{type:"url",placeholder:"https://meet.google.com/...",...s})}),e.jsx(oe,{children:"Link para a videochamada (Google Meet, Zoom, etc)"}),e.jsx(H,{})]})}),e.jsxs(Qe,{children:[e.jsx(Ye,{asChild:!0,children:e.jsx(f,{type:"button",variant:"outline",children:"Cancelar"})}),e.jsx(f,{type:"submit",disabled:x.isPending,children:x.isPending?"Agendando...":"Agendar reunião"})]})]})})]})})},ds=n=>n?n.split(" ").map(d=>d[0]).join("").toUpperCase().substring(0,2):"?",ks=()=>{const[,n]=Se("/support-groups/:id"),[,d]=Fe(),{user:u}=Pe(),{toast:i}=me(),[p,j]=C.useState(""),[h,N]=C.useState(!1),[r,l]=C.useState(!1),x=C.useRef(!0),t=n!=null&&n.id?parseInt(n.id,10):null,s=t!==null&&!isNaN(t)&&t>0,g=()=>{r||(l(!0),setTimeout(()=>{x.current&&d("/support-groups")},100))};C.useEffect(()=>{s||g()},[s]),C.useEffect(()=>()=>{x.current=!1},[]);const{data:v,isLoading:$,refetch:F}=I({queryKey:["/api/support-groups",t,"membership"],enabled:s&&!!u,staleTime:3e4,refetchOnWindowFocus:!1,retry:!1}),Y=(v==null?void 0:v.isMember)||!1,Z=((v==null?void 0:v.role)||"member")==="admin",{data:c,isLoading:te,error:je,refetch:ne}=I({queryKey:["/api/support-groups",t],enabled:s,staleTime:3e4,refetchOnWindowFocus:!1,retry:1,onSettled:(a,m)=>{m&&(i({title:"Erro ao carregar grupo",description:"Não foi possível carregar os detalhes do grupo. Voltando para a lista...",variant:"destructive"}),setTimeout(()=>{x.current&&g()},2e3))}}),{data:E,isLoading:ge,error:fe,refetch:us}=I({queryKey:["/api/support-groups",t,"messages"],enabled:s&&Y&&!r,staleTime:3e4,refetchOnWindowFocus:!1}),ie=(E==null?void 0:E.data)||[];E==null||E.pagination;const P=W({mutationFn:async a=>{if(!s)throw new Error("ID do grupo inválido");const m=await Q("POST",`/api/support-groups/${t}/messages`,{content:a});if(!m.ok){const K=await m.json();throw new Error(K.message||"Erro ao enviar mensagem")}return await m.json()},onSuccess:()=>{j(""),x.current&&(ce.invalidateQueries({queryKey:["/api/support-groups",t,"messages"]}),i({title:"Mensagem enviada",description:"Sua mensagem foi enviada com sucesso."}))},onError:a=>{x.current&&i({title:"Erro ao enviar mensagem",description:a instanceof Error?a.message:"Ocorreu um erro ao enviar a mensagem",variant:"destructive"})}}),G=W({mutationFn:async()=>{if(!s)throw new Error("ID do grupo inválido");const a=await Q("POST",`/api/support-groups/${t}/join`);if(!a.ok){const m=await a.json();throw new Error(m.message||"Erro ao entrar no grupo")}return await a.json()},onSuccess:()=>{x.current&&(F(),ne(),i({title:"Você entrou no grupo!",description:"Agora você pode participar das discussões e reuniões."}))},onError:a=>{x.current&&i({title:"Erro ao entrar no grupo",description:a instanceof Error?a.message:"Ocorreu um erro ao entrar no grupo",variant:"destructive"})}}),z=W({mutationFn:async()=>{if(!s)throw new Error("ID do grupo inválido");const a=await Q("POST",`/api/support-groups/${t}/leave`);if(!a.ok){const m=await a.json();throw new Error(m.message||"Erro ao sair do grupo")}return await a.json()},onSuccess:()=>{x.current&&(F(),ne(),i({title:"Você saiu do grupo",description:"Você não faz mais parte deste grupo de apoio."}))},onError:a=>{x.current&&i({title:"Erro ao sair do grupo",description:a instanceof Error?a.message:"Ocorreu um erro ao sair do grupo",variant:"destructive"})}}),Ne=a=>{a.preventDefault(),!(!p.trim()||P.isPending)&&P.mutate(p)},ve=a=>{try{const m=new Date(a),K=new Date,J=new Date(K);return J.setDate(J.getDate()-1),m.toDateString()===K.toDateString()?`Hoje às ${D(m,"HH:mm")}`:m.toDateString()===J.toDateString()?`Ontem às ${D(m,"HH:mm")}`:D(m,"dd/MM/yyyy 'às' HH:mm")}catch{return"Data inválida"}};return s?e.jsxs("div",{className:"container max-w-6xl mx-auto px-4 py-4",children:[e.jsxs(f,{variant:"ghost",size:"sm",className:"mb-4 -ml-2 text-sm flex items-center",onClick:g,disabled:r||G.isPending||z.isPending,children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),"Voltar para grupos"]}),je&&e.jsxs(R,{variant:"destructive",className:"mb-6",children:[e.jsx(V,{children:"Erro ao carregar o grupo"}),e.jsx(q,{children:"Não foi possível carregar os detalhes do grupo. Por favor, tente novamente mais tarde."})]}),te?e.jsxs("div",{className:"mb-6",children:[e.jsx(o,{className:"h-8 w-2/3 mb-2"}),e.jsx(o,{className:"h-4 w-1/2 mb-4"}),e.jsx(o,{className:"h-20 w-full mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{className:"h-9 w-32"}),e.jsx(o,{className:"h-9 w-32"})]})]}):c?e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:c.name}),e.jsx(b,{children:c.topic}),c.isPrivate&&e.jsx(b,{variant:"outline",children:"Privado"})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Criado ",qe(new Date(c.createdAt),{locale:re,addSuffix:!0}),c.therapist&&` • Moderado por ${c.therapist.firstName} ${c.therapist.lastName}`]})]}),e.jsx("div",{className:"flex gap-2",children:u?Y?e.jsxs(e.Fragment,{children:[Z&&e.jsxs(f,{variant:"outline",onClick:()=>N(!0),disabled:r,children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Agendar reunião"]}),e.jsx(f,{variant:"outline",onClick:()=>z.mutate(),disabled:z.isPending||r,children:z.isPending?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Saindo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"mr-2 h-4 w-4"}),"Sair do grupo"]})})]}):e.jsx(f,{onClick:()=>G.mutate(),disabled:G.isPending||r,children:G.isPending?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"mr-2 h-4 w-4"}),"Participar do grupo"]})}):e.jsx(f,{onClick:()=>d("/auth"),children:"Faça login para participar"})})]}),e.jsx(y,{className:"mb-6",children:e.jsxs(M,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs(b,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(X,{className:"h-4 w-4"}),c.memberCount||0," ",c.memberCount===1?"membro":"membros"]}),c.meetingFrequency&&e.jsxs(b,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(_,{className:"h-4 w-4"}),"Reuniões ",c.meetingFrequency.toLowerCase()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-medium",children:"Sobre este grupo"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:c.description})]}),c.rules&&e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[e.jsx("h3",{className:"font-medium",children:"Regras do grupo"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:c.rules})]})]})})]}):null,!Y&&!te&&c?e.jsxs(R,{className:"mb-6",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(V,{children:"Participe para ver o conteúdo"}),e.jsx(q,{children:"Você precisa fazer parte deste grupo para ver as mensagens e participar das discussões."})]}):e.jsxs(Le,{defaultValue:"messages",className:"space-y-4",children:[e.jsxs(He,{children:[e.jsxs(ee,{value:"messages",className:"flex gap-2",disabled:r,children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Mensagens"})]}),e.jsxs(ee,{value:"meetings",className:"flex gap-2",disabled:r,children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Reuniões"})]}),e.jsxs(ee,{value:"members",className:"flex gap-2",disabled:r,children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Membros"})]})]}),e.jsx(se,{value:"messages",className:"space-y-4",children:e.jsxs(y,{children:[e.jsxs(S,{className:"pb-3",children:[e.jsx(O,{children:"Conversas do grupo"}),e.jsx(U,{children:"Compartilhe suas experiências e apoie outros membros"})]}),e.jsx(M,{children:ge?e.jsx("div",{className:"space-y-4 mb-4",children:Array(5).fill(0).map((a,m)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(o,{className:"h-4 w-40"}),e.jsx(o,{className:"h-16 w-full"})]})]},m))}):fe?e.jsxs(R,{variant:"destructive",children:[e.jsx(V,{children:"Erro ao carregar mensagens"}),e.jsx(q,{children:"Não foi possível carregar as mensagens do grupo. Por favor, tente novamente mais tarde."})]}):ie.length===0?e.jsxs("div",{className:"text-center py-8 bg-white rounded-xl border border-gray-100 max-w-lg mx-auto",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-primary/10 text-primary mb-4",children:e.jsx(le,{className:"h-7 w-7"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma mensagem ainda"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Este grupo ainda não tem mensagens. Seja o primeiro a compartilhar algo com os outros membros!"}),e.jsxs("div",{className:"space-y-3 max-w-xs mx-auto mb-4",children:[e.jsx("p",{className:"text-sm text-left text-muted-foreground",children:"Dicas para iniciar uma conversa:"}),e.jsxs("ul",{className:"text-sm text-left space-y-2",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("div",{className:"mr-2 mt-0.5 text-primary",children:"✓"}),e.jsx("div",{children:"Compartilhe uma experiência pessoal"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("div",{className:"mr-2 mt-0.5 text-primary",children:"✓"}),e.jsx("div",{children:"Faça uma pergunta para o grupo"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("div",{className:"mr-2 mt-0.5 text-primary",children:"✓"}),e.jsx("div",{children:"Compartilhe um recurso útil ou informação"})]})]})]})]}):e.jsx(ke,{className:"h-[400px] pr-4",children:e.jsx("div",{className:"space-y-4 mb-4",children:ie.map(a=>e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(xe,{children:[e.jsx(he,{src:a.author.profilePicture}),e.jsx(pe,{children:ds(`${a.author.firstName} ${a.author.lastName}`)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-1",children:[e.jsxs("span",{className:"font-medium",children:[a.author.firstName," ",a.author.lastName]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:ve(a.message.createdAt)})]}),e.jsx("div",{className:"text-sm",children:a.message.content}),a.message.attachmentUrl&&e.jsx("a",{href:a.message.attachmentUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-xs text-blue-500 hover:underline",children:"Ver anexo"})]})]},a.message.id))})})}),e.jsx(ae,{children:e.jsxs("form",{onSubmit:Ne,className:"w-full flex gap-2",children:[e.jsx(ue,{placeholder:"Escreva sua mensagem...",value:p,onChange:a=>j(a.target.value),className:"flex-1 min-h-[60px]",disabled:P.isPending||r}),e.jsx(f,{type:"submit",size:"icon",disabled:!p.trim()||P.isPending||r,children:P.isPending?e.jsx(o,{className:"h-4 w-4"}):e.jsx(Xe,{className:"h-4 w-4"})})]})})]})}),e.jsx(se,{value:"meetings",children:e.jsxs(y,{children:[e.jsxs(S,{children:[e.jsx(O,{children:"Reuniões do grupo"}),e.jsx(U,{children:"Participe de reuniões online com outros membros"})]}),e.jsx(M,{children:c?e.jsx(os,{groupId:t,isAdmin:Z,onSchedule:()=>N(!0)}):e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(o,{className:"h-32 w-full"})})})]})}),e.jsx(se,{value:"members",children:e.jsxs(y,{children:[e.jsxs(S,{children:[e.jsx(O,{children:"Membros do grupo"}),e.jsx(U,{children:"Pessoas que fazem parte deste grupo de apoio"})]}),e.jsx(M,{children:c?e.jsx(is,{groupId:t,isAdmin:Z}):e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(o,{className:"h-32 w-full"})})})]})})]}),c&&e.jsx(cs,{open:h,onOpenChange:a=>!r&&N(a),groupId:t,groupName:c.name,onSuccess:()=>{ce.invalidateQueries({queryKey:["/api/support-groups",t,"meetings"]})}})]}):e.jsx("div",{className:"container max-w-6xl mx-auto px-4 py-8 flex justify-center",children:e.jsx(o,{className:"h-32 w-full max-w-md"})})};export{ks as default};
