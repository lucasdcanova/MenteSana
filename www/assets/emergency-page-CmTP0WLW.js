import{j as e,w as k,y as S,b as E,d as C,r as o,C as y,h as w,B as l,i as R,bf as h}from"./index-DKFI7ZyH.js";import{A as T,a as z,b as D}from"./alert-BjzQykUU.js";import{B as u}from"./badge-CsDoxorc.js";import{S as i}from"./skeleton-CDe7BuYf.js";import{R as f}from"./refresh-cw-RqVKnbVz.js";import{S as P}from"./star-CCvH2jAr.js";import{P as p}from"./phone-1GZSxC6s.js";import{M as $}from"./message-square-COtO5yp6.js";import{H as L}from"./headphones-CxTI8i3Q.js";function V({title:r,description:c,icon:d,actions:m,className:n}){return e.jsxs("div",{className:k("mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",n),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[d&&e.jsx("div",{className:"flex-shrink-0",children:d}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:r}),c&&e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:c})]})]}),m&&e.jsx("div",{className:"flex gap-2 items-center",children:m})]})}function q(){const{data:r=[],isLoading:c,isError:d,error:m,refetch:n}=S({queryKey:["/api/available-therapists-for-urgent"],retry:2,refetchOnWindowFocus:!0,refetchInterval:3e4});return{emergencyTherapists:r.map(a=>({...a,reviewCount:a.reviewCount||0,rating:a.rating||4.5,hourlyRate:a.hourlyRate||100,emergencyReady:!0,availability:a.availability||{status:"available"}})),isLoading:c,isError:d,error:m,refetch:n,isRefetching:!1}}function I(){const{emergencyTherapists:r=[],isLoading:c,isError:d,refetch:m}=q(),{toast:n}=E(),[,x]=C(),[a,g]=o.useState(!1),[U,A]=o.useState(new Date),[j,N]=o.useState(30);o.useEffect(()=>{A(new Date),N(30)},[r]),o.useEffect(()=>{const s=setInterval(()=>{N(t=>t>0?t-1:0)},1e3);return()=>clearInterval(s)},[]);const v=async()=>{g(!0);try{await m(),n({title:"Atualizado",description:"Lista de terapeutas disponíveis atualizada",variant:"default"})}catch{n({title:"Erro ao atualizar",description:"Não foi possível obter a lista mais recente",variant:"destructive"})}finally{g(!1)}},b=(s,t)=>{t==="video"?x(`/video-call?therapistId=${s}&emergency=true`):(n({title:"Chat iniciado",description:"Você será conectado com o terapeuta em instantes."}),x(`/chat?therapistId=${s}&emergency=true`))};return c?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 text-center md:text-left",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2 md:mb-0",children:"Terapeutas Disponíveis Agora"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-500",children:[e.jsx(f,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Carregando..."})]})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map((s,t)=>e.jsx(y,{className:"overflow-hidden rounded-xl shadow-sm",children:e.jsx(w,{className:"p-0",children:e.jsxs("div",{className:"p-4 flex items-start gap-4 animate-pulse",children:[e.jsx(i,{className:"h-16 w-16 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(i,{className:"h-5 w-2/3"}),e.jsx(i,{className:"h-4 w-1/3"}),e.jsx(i,{className:"h-4 w-1/2"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx(i,{className:"h-4 w-24 rounded-full"}),e.jsx(i,{className:"h-4 w-24 rounded-full"}),e.jsx(i,{className:"h-4 w-24 rounded-full"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx(i,{className:"h-8 w-28 rounded-full"}),e.jsx(i,{className:"h-8 w-20 rounded-full"})]})]})]})})},t))})]}):d?e.jsxs("div",{className:"p-8 text-center bg-gray-50 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Não foi possível carregar os terapeutas"}),e.jsx("p",{className:"text-gray-600 mb-5",children:"Ocorreu um erro ao buscar os terapeutas disponíveis."}),e.jsxs(l,{onClick:v,className:"bg-primary hover:bg-primary/90 active:scale-95 transition-transform rounded-full px-6 shadow-sm",children:[e.jsx(f,{className:"w-4 h-4 mr-2"})," Tentar novamente"]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 text-center md:text-left",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2 md:mb-0",children:"Terapeutas Disponíveis Agora"}),e.jsxs("div",{className:"flex items-center justify-center md:justify-end gap-2 text-sm text-gray-500",children:[e.jsxs("button",{onClick:v,className:"flex items-center gap-1 px-3 py-1.5 rounded-full hover:bg-gray-100 transition-all active:scale-95 active:bg-gray-200 hardware-accelerated ios-touch-fix",disabled:a,style:{border:"1px solid rgba(0,0,0,0.05)",boxShadow:a?"0 1px 2px rgba(0,0,0,0.05)":"0 2px 3px rgba(0,0,0,0.05)",transform:a?"scale(0.98)":"scale(1)"},children:[e.jsx(f,{className:`h-4 w-4 transition-all ${a?"animate-spin text-primary":"text-gray-500"}`}),e.jsx("span",{className:"text-xs md:text-sm font-medium",children:a?"Atualizando...":"Atualizar"})]}),e.jsxs("div",{className:"text-xs bg-gray-100 text-gray-500 flex items-center px-3 py-1.5 rounded-full shadow-sm",children:[e.jsx("span",{className:"hidden md:inline",children:"Atualização em "}),e.jsxs("span",{className:`md:ml-1 font-medium ${j<=5?"text-primary":""}`,children:[j,"s"]})]})]})]}),e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-10 px-4 bg-gray-50 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Nenhum terapeuta disponível no momento."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tente novamente em alguns instantes."})]}):r.map((s,t)=>e.jsx(y,{style:{animationDelay:`${t*150}ms`,opacity:0,animation:`fadeInUp 0.5s ease-out ${t*150}ms forwards`},className:"overflow-hidden transition-all duration-200 hover:shadow-md active:scale-[0.99] active:bg-gray-50 rounded-xl shadow-sm",children:e.jsx(w,{className:"p-0",children:e.jsxs("div",{className:"p-4 flex items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:`${s.firstName} ${s.lastName}`,className:"w-16 h-16 rounded-full object-cover"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold text-primary",children:[s.firstName.charAt(0),s.lastName.charAt(0)]})}),e.jsx("div",{className:"absolute bottom-0 right-0 bg-green-500 rounded-full w-4 h-4 border-2 border-white"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:["Dr(a). ",s.firstName," ",s.lastName]}),e.jsxs("div",{className:"flex items-center gap-1 text-amber-500 mb-1",children:[e.jsx(P,{className:"w-4 h-4 fill-current"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.rating||4.8," (",s.reviewCount||24," avaliações)"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.specialization||"Psicólogo(a) Clínico(a)"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.jsx(u,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Disponível Agora"}),s.emergencyReady&&e.jsx(u,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Atendimento de Emergência"}),e.jsxs(u,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Atendimento em ~5 min"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(l,{size:"sm",className:"bg-green-600 hover:bg-green-700 transition-all active:scale-95 active:bg-green-800 shadow-sm rounded-full hardware-accelerated ios-touch-fix",onClick:()=>b(s.id,"video"),style:{boxShadow:"0 2px 8px rgba(0, 172, 138, 0.25)"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Videochamada"})]})}),e.jsx(l,{size:"sm",variant:"outline",className:"transition-all active:scale-95 active:bg-gray-100 rounded-full hardware-accelerated ios-touch-fix",onClick:()=>b(s.id,"chat"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Chat"})]})})]})]})]})})},s.id))})]})}function W(){const[,r]=C();return e.jsxs("div",{className:"container max-w-6xl mx-auto px-4 py-6 md:px-6",children:[e.jsx(V,{title:"Atendimento de Emergência",description:"Acesso rápido a profissionais disponíveis para suporte imediato em situações críticas.",icon:e.jsx(h,{className:"h-8 w-8 text-red-500"})}),e.jsxs(T,{className:"mb-6 border-red-200 bg-red-50 w-full max-w-full shadow-sm",children:[e.jsx(h,{className:"h-4 w-4 text-red-600 flex-shrink-0"}),e.jsx(z,{className:"text-red-700 font-semibold",children:"Está em crise?"}),e.jsx(D,{className:"text-red-600 text-center md:text-left",children:"Se você estiver em uma emergência com risco de vida ou em uma situação que requer assistência imediata, por favor, entre em contato com os serviços de emergência locais."}),e.jsxs("div",{className:"mt-2 flex flex-wrap justify-center md:justify-start gap-2",children:[e.jsxs(l,{size:"sm",variant:"destructive",className:"bg-red-600 hover:bg-red-700 rounded-full px-4",onClick:()=>window.open("tel:188","_blank"),children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Ligar para 188 (CVV)"]}),e.jsxs(l,{size:"sm",variant:"outline",className:"border-red-200 text-red-700 hover:bg-red-100 rounded-full px-4",onClick:()=>window.open("tel:192","_blank"),children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"SAMU (192)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(I,{})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-center md:text-left",children:"Recursos Adicionais"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(L,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Centro de Valorização da Vida"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Apoio emocional gratuito 24h por dia"}),e.jsx(l,{variant:"link",className:"px-0 h-auto py-0 text-primary",onClick:()=>window.open("https://www.cvv.org.br/","_blank"),children:"Acessar site"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(h,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Primeiros Socorros Psicológicos"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Guia para momentos de crise emocional"}),e.jsx(l,{variant:"link",className:"px-0 h-auto py-0 text-primary",onClick:()=>r("/self-help/crisis"),children:"Ler guia"})]})]}),e.jsx(l,{className:"w-full rounded-full mt-2 shadow-sm",onClick:()=>r("/assistant"),children:"Falar com Assistente Virtual"})]})]}),e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center md:text-left",children:"Sinais de Alerta"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 text-center md:text-left",children:"Reconheça os sinais que podem indicar necessidade de ajuda imediata:"}),e.jsxs("ul",{className:"text-sm list-disc px-2 md:px-4 space-y-2 text-gray-600",children:[e.jsx("li",{children:"Pensamentos suicidas ou de autolesão"}),e.jsx("li",{children:"Ansiedade extrema ou ataques de pânico"}),e.jsx("li",{children:"Alterações drásticas de humor"}),e.jsx("li",{children:"Comportamento impulsivo perigoso"}),e.jsx("li",{children:"Sentimento de estar fora da realidade"}),e.jsx("li",{children:"Crises traumáticas agudas"})]})]})]})]})]})}export{W as default};
