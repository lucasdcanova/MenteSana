import{c as M,r as d,b as F,u as U,j as e,C as h,f as T,aT as B,g as H,h as p,b7 as L,B as x,A as z,I as V,b4 as q,L as P,E as C,i as O}from"./index-DKFI7ZyH.js";import{T as W,a as _,b as S,c as A}from"./tabs-BarOwXjl.js";import{T as G}from"./textarea-CW1zArsP.js";import{S as y}from"./star-CCvH2jAr.js";import{A as $}from"./arrow-left-BO9DtpKD.js";import{a as R,M as J}from"./map-pin-BshieWSJ.js";import{V as K}from"./video-CdR5eL6v.js";import{P as Q}from"./phone-1GZSxC6s.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=M("StarHalf",[["path",{d:"M12 17.8 5.8 21 7 14.1 2 9.3l7-1L12 2",key:"nare05"}]]);function Y({therapistId:j}){const[c,s]=d.useState([]),[b,N]=d.useState(!0),[f,v]=d.useState(40),[g,u]=d.useState(""),[l,t]=d.useState(!1),{toast:r}=F(),{user:k}=U();d.useEffect(()=>{async function a(){try{N(!0);const i=await fetch(`/api/therapists/${j}/reviews`);if(!i.ok)throw new Error("Falha ao carregar avaliações");const o=await i.json();s(o)}catch(i){console.error("Erro ao carregar avaliações:",i),r({title:"Erro",description:"Não foi possível carregar as avaliações",variant:"destructive"})}finally{N(!1)}}a()},[j,r]);const I=async()=>{if(!k){r({title:"Acesso negado",description:"Você precisa estar logado para avaliar um terapeuta",variant:"destructive"});return}try{t(!0);const a={rating:f,comment:g.trim()||null},i={"Content-Type":"application/json"},o=localStorage.getItem("auth_token");o&&(i.Authorization=`Bearer ${o}`);const m=await V("POST",`/api/therapists/${j}/reviews`,a);if(!m.ok){const n=await m.json();throw new Error(n.message||"Falha ao enviar avaliação")}const w=await m.json();s(n=>[w,...n]),u(""),r({title:"Avaliação enviada",description:"Sua avaliação foi registrada com sucesso",variant:"default"})}catch(a){console.error("Erro ao enviar avaliação:",a),r({title:"Erro",description:a instanceof Error?a.message:"Falha ao enviar avaliação",variant:"destructive"})}finally{t(!1)}},D=a=>{const i=[],o=Math.floor(a/10),m=a%10>=5;for(let n=0;n<o;n++)i.push(e.jsx(y,{className:"fill-yellow-400 text-yellow-400"},`full-${n}`));m&&i.push(e.jsx(X,{className:"fill-yellow-400 text-yellow-400"},"half"));const w=5-o-(m?1:0);for(let n=0;n<w;n++)i.push(e.jsx(y,{className:"text-gray-300"},`empty-${n}`));return i},E=()=>c.length===0?0:c.reduce((i,o)=>i+o.rating,0)/c.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6 p-4 bg-emerald-50 rounded-lg",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Avaliações"}),c.length>0?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[D(E()),e.jsx("span",{className:"ml-2 text-lg font-medium",children:(E()/10).toFixed(1)})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[c.length," avaliação(ões)"]})]}):e.jsx("p",{className:"text-gray-500",children:"Ainda não há avaliações"})]}),k&&e.jsxs(h,{className:"mb-6",children:[e.jsxs(T,{children:[e.jsx(B,{children:"Avaliar terapeuta"}),e.jsx(H,{children:"Compartilhe sua experiência com este terapeuta"})]}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(L,{htmlFor:"rating",children:"Avaliação"}),e.jsx("div",{className:"flex gap-2",children:[10,20,30,40,50].map(a=>e.jsx("button",{type:"button",onClick:()=>v(a),className:"focus:outline-none",children:e.jsx(y,{className:`w-8 h-8 ${f>=a?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},a))})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(L,{htmlFor:"comment",children:"Comentário (opcional)"}),e.jsx(G,{id:"comment",value:g,onChange:a=>u(a.target.value),placeholder:"Compartilhe sua experiência com este terapeuta...",className:"min-h-[100px]"})]}),e.jsx(x,{onClick:I,disabled:l,className:"w-full",children:l?"Enviando...":"Enviar Avaliação"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Comentários"}),b?e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{children:"Carregando avaliações..."})}):c.length>0?c.map(a=>e.jsxs(h,{className:"overflow-hidden",children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[D(a.rating),e.jsx("span",{className:"ml-2 font-medium",children:(a.rating/10).toFixed(1)})]}),e.jsx("span",{className:"text-sm text-gray-500",children:z(new Date(a.createdAt),"dd/MM/yyyy")})]})}),a.comment&&e.jsx(p,{children:e.jsx("p",{className:"text-gray-700",children:a.comment})})]},a.id)):e.jsx(h,{children:e.jsx(p,{className:"py-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Não há avaliações para exibir"})})})]})]})}function ce(){var u;const{id:j}=q(),c=parseInt(j),[s,b]=d.useState(null),[N,f]=d.useState(!0),{toast:v}=F();if(d.useEffect(()=>{async function l(){try{f(!0);const t=await fetch(`/api/therapists/${c}`);if(!t.ok)throw new Error("Falha ao carregar informações do terapeuta");const r=await t.json();b(r)}catch(t){console.error("Erro ao carregar terapeuta:",t),v({title:"Erro",description:"Não foi possível carregar as informações do terapeuta",variant:"destructive"})}finally{f(!1)}}isNaN(c)||l()},[c,v]),N)return e.jsx("div",{className:"container max-w-5xl mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("p",{className:"text-lg text-gray-500",children:"Carregando informações do terapeuta..."})})});if(!s)return e.jsx("div",{className:"container max-w-5xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[e.jsx("p",{className:"text-xl text-gray-700",children:"Terapeuta não encontrado"}),e.jsx(x,{asChild:!0,children:e.jsxs(P,{href:"/therapists",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Voltar para lista de terapeutas"]})})]})});const g=()=>["domingo","segunda","terça","quarta","quinta","sexta","sábado"].filter(t=>s.availability[t]);return e.jsxs("div",{className:"container max-w-5xl mx-auto px-4 py-8",children:[e.jsx(x,{variant:"ghost",asChild:!0,className:"mb-6",children:e.jsxs(P,{href:"/therapists",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Voltar para lista de terapeutas"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8",children:[e.jsx("div",{className:"w-28 h-28 md:w-40 md:h-40 rounded-full bg-emerald-100 overflow-hidden flex-shrink-0",children:s.imageUrl?e.jsx("div",{className:"w-full h-full",style:{backgroundImage:`url(${s.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-emerald-200",children:e.jsx("span",{className:"text-3xl font-medium text-emerald-800",children:`${s.firstName[0]}${s.lastName[0]}`})})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-emerald-900",children:["Dr. ",s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-lg text-emerald-700",children:s.specialization}),e.jsxs("div",{className:"flex items-center mt-2 text-gray-600",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"mr-4",children:s.location||"São Paulo, Brasil"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",((u=s.hourlyRate)==null?void 0:u.toFixed(2))||"150,00","/hora"]})]}),e.jsx("div",{className:"flex items-center mt-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"ml-1 font-medium",children:s.rating?(s.rating/10).toFixed(1):"N/A"})]})}),e.jsx("div",{className:"flex flex-wrap mt-3 gap-2",children:s.tags.map((l,t)=>e.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-800 rounded-full px-3 py-1",children:l},t))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-2 sm:mt-0",children:[e.jsxs(x,{children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Agendar consulta"]}),e.jsxs(x,{variant:"outline",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Conversa rápida"]})]})]})})]}),e.jsxs(W,{defaultValue:"about",className:"w-full",children:[e.jsxs(_,{className:"mb-6",children:[e.jsx(S,{value:"about",children:"Sobre"}),e.jsx(S,{value:"reviews",children:"Avaliações"}),e.jsx(S,{value:"schedule",children:"Horários"})]}),e.jsx(A,{value:"about",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(h,{children:e.jsxs(p,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sobre"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.bio||`Dr. ${s.firstName} ${s.lastName} é um profissional especializado em ${s.specialization}. 
                    
Com vasta experiência clínica e formação acadêmica sólida, oferece tratamento personalizado para diversas condições psicológicas.

Sua abordagem integra técnicas baseadas em evidências científicas, sempre focando nas necessidades individuais de cada paciente.`}),e.jsx("h3",{className:"text-lg font-semibold mt-6 mb-2",children:"Especialidades"}),e.jsx("ul",{className:"list-disc pl-5 text-gray-700",children:s.tags.map((l,t)=>e.jsx("li",{children:l},t))}),e.jsx("h3",{className:"text-lg font-semibold mt-6 mb-2",children:"Formação"}),e.jsxs("ul",{className:"list-disc pl-5 text-gray-700",children:[e.jsx("li",{children:"Doutorado em Psicologia Clínica - Universidade de São Paulo"}),e.jsx("li",{children:"Mestrado em Neuropsicologia - Universidade Federal do Rio de Janeiro"}),e.jsx("li",{children:"Graduação em Psicologia - PUC-SP"})]})]})})}),e.jsx("div",{children:e.jsx(h,{children:e.jsxs(p,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contato"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"h-5 w-5 text-emerald-600 mr-3"}),e.jsx("span",{children:s.email||`${s.firstName.toLowerCase()}.${s.lastName.toLowerCase()}@mentehealthy.com`})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"h-5 w-5 text-emerald-600 mr-3"}),e.jsx("span",{children:s.phone||"(11) 98765-4321"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"h-5 w-5 text-emerald-600 mr-3"}),e.jsx("span",{children:s.location||"São Paulo, SP"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(C,{className:"h-5 w-5 text-emerald-600 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold block",children:"Dias disponíveis:"}),e.jsx("p",{children:g().map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(", ")})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(O,{className:"h-5 w-5 text-emerald-600 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold block",children:"Horários:"}),e.jsx("p",{children:"9:00 - 18:00"})]})]})]})]})})})]})}),e.jsx(A,{value:"reviews",children:e.jsx(Y,{therapistId:c})}),e.jsx(A,{value:"schedule",children:e.jsx(h,{children:e.jsxs(p,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Disponibilidade"}),e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Próximos horários disponíveis"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map((l,t)=>{const r=new Date;return r.setDate(r.getDate()+t),e.jsxs(x,{variant:"outline",className:"flex items-center justify-start h-auto py-3",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:r.toLocaleDateString("pt-BR",{weekday:"long"}).charAt(0).toUpperCase()+r.toLocaleDateString("pt-BR",{weekday:"long"}).slice(1)}),e.jsx("div",{className:"text-sm text-gray-500",children:r.toLocaleDateString("pt-BR",{day:"numeric",month:"long"})})]})]},t)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Horários regulares"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2",children:["domingo","segunda","terça","quarta","quinta","sexta","sábado"].map(l=>{const t=s.availability[l],r=l.charAt(0).toUpperCase()+l.slice(1);return e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"font-medium",children:r}),e.jsx("span",{className:t?"text-emerald-600":"text-gray-400",children:t?"9:00 - 18:00":"Indisponível"})]},l)})})]})]})]})})})]})]})}export{ce as default};
